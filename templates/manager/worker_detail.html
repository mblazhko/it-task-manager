{% extends 'base.html' %}

{% block title %}- {{ worker }} profile {% endblock title %}

{% block content %}

    <div class="container-fluid">

      <div class="card card-body blur shadow-blur mx-0 mt-n0 overflow-hidden">
        <div class="row gx-4">
          <div class="col-auto my-auto">
            <div class="h-100">
              {% if worker.first_name or worker.last_name %}
                <h5 class="mb-1">
                {{ worker.first_name }} {{ worker.last_name }}
                </h5>
              {% else %}
                {{ worker.username }}
              {% endif %}
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="container-fluid py-4">

      <div class="row">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <div class="row">
                <div class="col-md-8 d-flex align-items-center">
                  <h6 class="mb-0">Profile Information</h6>
                </div>
                <div class="col-md-4 text-end">
                  <a class="icon-move-left" href="{% url "manager:worker-update" pk=worker.id %}">
                    <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit worker"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="card-body p-3">
              <hr class="horizontal gray-light my-3">
              <ul class="list-group">
                <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-dark">Username: </strong>{{ worker.username }}</li>
                <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-dark">Email: </strong>{{ worker.email }}</li>
                <li class="list-group-item border-0 ps-0 pt-0 text-sm"><strong class="text-dark">Position: </strong> &nbsp;
                  {% if worker.position %}
                    {{ worker.position }}
                  {% else %}
                    Not assigned to a position
                  {% endif %}
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-header pb-0 p-3">
              <h6 class="mb-0">Assigned tasks</h6>
            </div>
            <div class="card-body p-3">
              <ul class="list-group">
                {% if worker.assignees.all  %}
                  {% for task in worker.assignees.all %}
                    <a href="{% url "manager:task-detail" pk=task.id %}">
                      {{ task.name }}
                      {% if task.is_completed %}
                        (completed)
                      {% else %}
                        (not completed)
                      {% endif %}
                    </a>
                  {% endfor %}
                {% else %}
                  <p class="mx-1">There is no assigned tasks</p>
                {% endif %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

{% endblock content %}
